<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel='stylesheet' href='style.css'>
        <style>
            #display { font-size: 2.5vw }
        </style>
    </head>
    <body>

        <button id="play">Play</button>
        <button id="stop">Stop</button>
        <input type='range' min="0" max="1" value='0.2' id='volume' step='any'>
        <div id='display'></div>


        <script type="module">
            import { webaudio } from './browser.js';
            const tau = Math.PI * 2
            const frequency = 360

            const volume = document.getElementById('volume')

            function sine(time, i){
                return Math.sin(time * tau * frequency) * volume.value
            }

            const channel = webaudio(sine);

            document.getElementById('play')
                .addEventListener('click', e => channel.play())
            document.getElementById('stop')
                .addEventListener('click', e => channel.stop())
        </script>

        <script>
            document.getElementById('display').innerText = 
                document.querySelector('script[type=module]').innerText.replace(/^ {12}/mg, '')
        </script>
    </body>
</html>
